
<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
<meta charset="UTF-8" />
<link rel="preload" as="image" href="https://www.grammarcheck.net/wp-content/uploads/2021/05/logo.png" />
<link rel="preconnect" href="https://cdn.jsdelivr.net" />
<link rel="preconnect" href="https://svc.webspellchecker.net" />
<link rel="preconnect" href="https://ajax.googleapis.com" />
<link rel="preconnect" href="https://www.googletagmanager.com" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://www.grammarcheck.net/wp-content/thesis/skins/classic-r/css.css" rel="stylesheet" />
<title>Free Grammar Checker (Online Editor)</title>
<meta name="description" content="It's simple: copy and paste your text into the online editor to check grammar, spelling, and punctuation. Find the best words to improve any text instantly using GrammarCheck's AI-powered grammar checker." />
<link href="https://www.grammarcheck.net/editor/" rel="canonical" />
<link rel="shortcut icon" href="https://www.grammarcheck.net/favicon.ico" type="image/x-icon" />
<link rel="icon" sizes="16x16 32x32 48x48" href="https://www.grammarcheck.net/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="https://www.grammarcheck.net/img/favicon-16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="https://www.grammarcheck.net/img/favicon-32.png" />
<link rel="apple-touch-icon" sizes="180x180" href="https://www.grammarcheck.net/img/apple-touch-icon.png" />
<link rel="manifest" href="https://www.grammarcheck.net/manifest.json" />
<meta name="msapplication-TileColor" content="#8bc53e" />
<meta name="msapplication-TileImage" content="https://www.grammarcheck.net/img/icon-144.png" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<link rel="https://api.w.org/" href="https://www.grammarcheck.net/wp-json/" /><link rel="alternate" title="JSON" type="application/json" href="https://www.grammarcheck.net/wp-json/wp/v2/pages/3320" /><script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "@id": "#editor",
  "inLanguage": "en-US",
  "name": "Grammar Checker",
  "potentialAction": {
    "@type": "WriteAction",
    "name": "Grammar Checker"
  },
  "description": "AI-powered online grammar checker to check grammar, spelling, punctuation, and style. Eliminate even tricky grammar errors and find the best words to improve any text instantly.",
  "isPartOf": [
    {
      "@type": "WebSite",
      "@id": "/#website",
      "url": "https://www.grammarcheck.net/",
      "name": "GrammarCheck",
      "description": "Now you can grammar and spell check any text or document online. Simply copy and paste your text onto our website to proofread, review, and correct it."
    }
  ]
}
</script>
<meta property="og:image" content="https://www.grammarcheck.net/img/editor-share.png" />
<meta http-equiv="pragma" content="no-cache" />
<style>
.froala-editor {
    width: 800px;
    max-height: 1000px;
    margin:auto;
    border-radius: 0 !important;
    position: relative;
}

.fr-box .fr-counter, .fr-toolbar.fr-top, .fr-second-toolbar {
    border-radius: 0 !important;
}

.wsc-settings__about, div.hide {
    display: none!important;
}

.fr-box.fr-basic .fr-element.fr-view {
    font-size: 16px;
}

.fr-box li {
    margin-left: 20px;
}

#edbox {
min-height: clamp(300px,391px,100%);
min-height: 391px;
}

#enav {
    display: flex;
    justify-content: space-between;
    height: 33px;
    width: 100%;
    margin: 10px 0;
    text-align: center;
}

#enav .left {
    width: 144px;
}

#enav .right {
    width: 144px;
}

#btn-fix-all-errors {
  display: none;
  width: auto;
  height: 33px;
  margin: 0;
  padding: 0 10px;
  font-size: 13px;
  line-height: 33px;
  font-family: Arial;
  background: linear-gradient(#78b12c,#6da226);
  color: #fff;
  border: 1px solid #c5c4c4;
  border-radius: 6px;
  box-shadow: 0.04em 0.04em 0 0 #727171;
  cursor: pointer;
  justify-content: center;
  align-items: center;
  white-space: nowrap;
}

#btn-fix-all-errors:hover {
  background: linear-gradient(#6da226,#6da226);
}

button.transparent {
    border: none;
    background-image: url('https://www.grammarcheck.net/img/free-check.png');
    background-repeat: no-repeat;
    background-size: contain;
    cursor: pointer;
    width: 144px;
    height: 33px;
}

button.glyon {
    cursor: wait !important;
    background-image: url('https://www.grammarcheck.net/img/autocorrect.png') !important;
    pointer-events: all !important;
    opacity: 1 !important;
}

#gly, #chk {
    display: none;
    width: auto;
    height: 33px;
    font-size: 14px;
    line-height: 33px;
    font-family: Arial;
}

input {
  padding: 0;
  border:none;
  background-color: #fff;
  cursor:pointer;
}

#lnDropdown-selected {
    min-width: 80px;
}

.fetch {
    display: flex;
    justify-content: center;
    align-items: center;
}

#fetching-data {
    left: 50%;
    transform: translateX(-50%);
    z-index: 100;
    height: 50%;
    position: absolute;
    top: 0;
    display:none;
}

#fetching-data img {
    height: 30px;
}

@media screen and (max-width: 600px) {

    #chk, #gly {
        display: none !important;
    }
    #btn-fix-all-errors {
        font-size: 12px;
    }    
    .modal-content {
        text-align: center;
        width: 80% !important;
    }
    #refresh-page .btn-large {
        width: auto;
        font-size: 10px !important;
    }
    .modal-actions {
        display: flex;
        justify-content: space-around;
    }
    .modal-actions button {
        font-size: 10px;
        width: auto;
        min-width: 105px;
    }
    #refresh-page p {
        font-size: 16px;
    }

}

@media screen and (min-width: 480px) {
    .fr-dialog {
        border-right: 1px solid #efefef;
    }
}

@media screen and (max-width: 386px) {

    #btn-fix-all-errors {
        font-size: 10px;
        padding: 5px;
    }
}

@media screen and (max-width: 370px) {

    #btn-fix-all-errors {
        display: none!important;
    }
}

/* Modal BG */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    /* Enable scroll if needed */
    background-color: rgb(0, 0, 0);
    /* Fallback color */
    background-color: rgba(0, 0, 0, 0.4);
    /* Black w/ opacity */
    align-items: center;
    justify-content: center;
}

/* Modal Content */
.modal-content {
    position: relative;
    background-color: #fefefe;
    margin: 2% auto;
    padding: 0;
    border: 1px solid #888;
    width: 50%;
    max-width: 340px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    -webkit-animation-name: animatetop;
    -webkit-animation-duration: 0.4s;
    animation-name: animatetop;
    animation-duration: 0.4s
}

.modal-body {
    padding: 22px;
}

/* Add Animation */
@-webkit-keyframes animatetop {
    from {
        transform: translateY(-300px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Add Animation */
@keyframes animatetop {
    from {
        transform: translateY(-500px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.button-sign {
    border-radius: 4px;
    background-color: #f4511e;
    border: none;
    color: #FFFFFF;
    text-align: center;
    font-size: 12px;
    padding: 12px;
    width: 110px;
    transition: all 0.5s;
    cursor: pointer;
    margin: 5px;
}

.btn-large {
    width: 300px;
    font-size: 14px !important;
}

#refresh-page {
    display: none;
    text-align: center;
    font-size: 18px;
}

.button-sign:hover {
    background-color: #f4511e;
}

.button-sign span {
    cursor: pointer;
    display: inline-block;
    position: relative;
    transition: 0.5s;
}

.button-sign span:after {
    content: '\00bb';
    position: absolute;
    opacity: 0;
    top: 0;
    right: -20px;
    transition: 0.5s;
}

.button-sign:hover span {
    padding-right: 25px;
}

.button-sign:hover span:after {
    opacity: 1;
    right: 0;
}

.btn {
    background-color: #ddd;
    border: none;
    color: #00000094;
    padding: 12px;
    text-align: center;
    font-size: 12px;
    margin: 4px 2px;
    transition: 0.3s;
    cursor: pointer;

}
/* FAQ */
.a_item {
	border: solid 1px #e0d9cb;
	margin-bottom: 10px;
}
.a_ttl {
	padding: 24px;
	background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpolyline fill='none' opacity='.3' stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='2' points='13.5 10.5 8 5 2.5 10.5'/%3E%3C/svg%3E%0A") no-repeat calc(100% - 24px) center #f8f1e1;
	font-weight: 600;
	font-size: 19px;
	cursor: pointer;
}
.a_ttl:hover {
	background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpolyline fill='none' stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='2' points='13.5 10.5 8 5 2.5 10.5'/%3E%3C/svg%3E%0A") no-repeat calc(100% - 24px) center #f8f1e1;
}
.a_ttl.closed {
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpolyline fill='none' opacity='.3' stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='2' points='13.5 5 8 10.5 2.5 5'/%3E%3C/svg%3E");
}
.a_ttl.closed:hover {
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpolyline fill='none' stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='2' points='13.5 5 8 10.5 2.5 5'/%3E%3C/svg%3E");
}
.a_txt {
	padding: 0 24px 24px 24px;
	background-color: #f8f1e1;
	overflow: hidden;
	max-height: 700px;
	transition: all .3s ease-in-out;
}
#itm0 .a_txt {
	transition: all .6s ease-in-out;
}
.a_txt div {
	opacity: 1;
	transition: all .3s .2s linear;
}
.a_txt.closed {
	padding-top: 0;
	padding-bottom: 0;
	max-height: 0;
}
.a_txt.closed div {
	opacity: 0;
}
.a_item p:last-of-type {
	margin-bottom: 0;
}
/* CLS Fix */
body.editor .columns > .content {
    position: relative;
}
.fr-box.fr-basic.fr-top {
    position: relative;
    display: flex;
    flex-direction: column;
    top: 0;
    width: 100%;
    min-height: 391px;
    max-height: 1000px;
}
.fr-box.fr-basic.fr-top .fr-wrapper {
    position: relative;
    height: 100%;
    max-height: none;
    overflow-x: hidden !important;
}
.fr-element.fr-view {
    min-height: 391px;
}
textarea.froala-editor {
    min-height: 391px;
    max-height: 1000px;
    top: 0;
    width: 100%;
    background: #fff;
    background-image: url(https://www.grammarcheck.net/img/checking.gif);
    background-size: 30px 30px;
    background-position: 50% 50%;
    background-repeat: no-repeat;
}
.resize-handle {
  width: 100%;
  height: 10px;
  background: #eee;
  cursor: ns-resize;
  display: flex;
  align-items: center;
  justify-content: center;
}
.resize-handle::before {
  content: '';
  width: 30px;
  height: 2px;
  background: #888;
}
.dialog-btn {
  background-color: #e0e0e0;
  color: #444;
  border: none;
  border-radius: 4px;
  margin-left: 5px;
  padding: 3px 12px;
  font-size: 14px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}
.dialog-btn:hover {
  background-color: #ccc;
}
.gly-enabled {
    cursor:pointer;
}
.fr-dialog {
  background-color: #fdf8f1;
  color:#333!important;
}
</style>
<noscript><style>.menu { display: block; }</style></noscript></head>
<body class="editor template-custom">
<div class="container">
<div id="header" class="header">
<div id="social_box" class="text_box">
<a id="bm" href="https://www.grammarcheck.net/editor/" style="display: inline-block;margin-top: 7px; padding: 0 5px;border-radius: 2px;border: 3px double #ddd;padding: 0 5px;">#1 Grammar Checker</a>
</div>
<a id="thesis_header_image_link" href="https://www.grammarcheck.net"><img id="thesis_header_image" src="https://www.grammarcheck.net/wp-content/uploads/2021/05/logo.png" alt="GrammarCheck header image" width="291" height="54" /></a>
</div>
<span class="menu_control">‚â° Menu</span>
<ul id="menu-menu" class="menu"><li id="menu-item-6" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-6"><a href="https://www.grammarcheck.net/">Home</a></li>
<li id="menu-item-227" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-227"><a href="https://www.grammarcheck.net/blog/">Blog</a></li>
<li id="menu-item-1024" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1024"><a href="https://www.grammarcheck.net/infographics/">Infographics</a></li>
<li id="menu-item-3323" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-3320 current_page_item menu-item-3323"><a href="https://www.grammarcheck.net/editor/" aria-current="page">Check Your Text</a></li>
</ul>
<div class="columns">
<div class="content">
<div id="edbox">
<div id="fetching-data" class="fetch">
<img src="https://www.grammarcheck.net/img/checking.gif" alt="checking" />
</div>
<textarea id="editor" data-gramm="false" data-gramm_editor="false" data-enable-grammarly="false" class="froala-editor"></textarea>
</div>
<div class="resize-handle"></div>
<div id="enav">
<div class="left">
<button id="btn-free-check" onclick="enableChecker();" class="transparent" aria-label="Free Check">
</button>
</div>
<div>
<button id="btn-fix-all-errors" onclick="fixAllErrors();" aria-label="Fix all errors">
Fix Errors
</button>
</div>
<div id="chk">No errors found. Check for difficult-to-spot mistakes<img height="33" src="https://www.grammarcheck.net/img/ar.png" style="float:right;height:22px;margin:5px auto auto 10px;" alt="arrow pointing right" /></div>
<div id="gly">Your text might contain multiple advanced writing issues<img height="33" src="https://www.grammarcheck.net/img/ar.png" style="float:right;height:22px;margin:5px auto auto 10px;" alt="arrow pointing right" /></div>
<div class="right">
<form id="submitTextForm" method="post" target="_blank" style="margin: 0;">
<input type="image" src="https://www.grammarcheck.net/img/deep-check.png" alt="Submit" width="144" height="33">
</form>
</div>
</div>

<div id="signUpModal" class="modal">
<div class="modal-content">
<div class="modal-body">
<div id="choice-box">
<p>For large texts, please install the app first</p>
<br/>
<div class="modal-actions">
<button id="go-to-signup" class="button-sign"><span>Get app</span></button>
<button id="continue-with-short" class="btn">Continue with short text</button>
</div>
</div>
<div id="refresh-page">
<p>To enable large texts, please confirm</p>
<br/>
<div class="center">
<button class="button-sign btn-large" onClick="window.location.reload();"><span>Yes,
I have installed the app!</span></button>
</div>
</div>
</div>
</div>
</div>
<div class="post_content grt">
<div class="modular">
<div itemscope itemtype="https://schema.org/FAQPage">
<div class="a_item" id="itm0" itemprop="mainEntity" itemscope itemtype="https://schema.org/Question">
<div class="a_ttl" data-id="0">
<span itemprop="name">How it works</span>
</div>
<div class="a_txt" itemprop="acceptedAnswer" itemscope itemtype="https://schema.org/Answer">
<div itemprop="text">
<p>To check your text, copy and paste or write directly into the online editor above.</p>
<p>Click the <img decoding="async" alt="gray" height="18" src="https://www.grammarcheck.net/img/free-check-icon.gif" style="display: inline;" width="18"> <strong>Free Check</strong> button to check grammar, spelling, and punctuation. If you see an underlined word or text passage, click on the highlighted area for correction options and apply them as needed.</p>
<p>To make sure your sentences are clear and your word choice is perfect, double-check your text.</p>
<p>Click the <img decoding="async" alt="orange" height="18" src="https://www.grammarcheck.net/img/deep-check-icon.gif" style="display: inline;" width="18"> <strong>Deep Check</strong> button to detect even difficult-to-spot writing mistakes, such as wrong words, advanced punctuation and capitalization errors, run-on sentences, dangling modifiers, style issues, incorrect tense, and up to ten times more errors than any other grammar checker. To enable advanced corrections and suggestions in the online editor, wait for the check to complete, install the app or browser extension, and reload this page.</p>
</div>
</div>
</div>
<div class="a_item" id="itm1" itemprop="mainEntity" itemscope itemtype="https://schema.org/Question">
<div class="a_ttl closed" data-id="1">
<span itemprop="name">More than a grammar checker?</span>
</div>
<div class="a_txt closed" itemprop="acceptedAnswer" itemscope itemtype="https://schema.org/Answer">
<div itemprop="text">
<p>Yes. This tool checks not only grammar, but also spelling, punctuation, word choice, and even style.</p>
<table style="margin-top:10px; text-align:left;"><tbody><tr><th style="vertical-align:top;">üîé Checks</th><td style="padding-left:15px">Grammar, spelling, punctuation, and more</td></tr><tr><th style="vertical-align:top; white-space:nowrap;">‚ö° AI-based</th><td style="padding-left:15px">Using the best grammar check algorithms</td></tr><tr><th style="min-width: fit-content; white-space:nowrap;">‚úÖ Free Check</th><td style="padding-left:15px">No registration required</td></tr><tr><th>üåê English</th><td style="padding-left:15px">US, UK, CA, AU, SA, NZ</td></tr></tbody></table>
</div>
</div>
</div>
<div class="a_item" id="itm2" itemprop="mainEntity" itemscope itemtype="https://schema.org/Question">
<div class="a_ttl closed" data-id="2">
<span itemprop="name">Who is this tool for?</span>
</div>
<div class="a_txt closed" itemprop="acceptedAnswer" itemscope itemtype="https://schema.org/Answer">
<div itemprop="text"><p>This tool is for anyone who writes in English, from students and learners to professionals, teachers, and even proofreaders. After all, even native speakers of English aren't immune to mistakes.</p></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sidebar">
<div class="widget widget_pages fwidgets" id="pages-2"><p class="widget_title">Pages</p>
<ul>
<li class="page_item page-item-139"><a href="https://www.grammarcheck.net/">Home</a></li>
<li class="page_item page-item-118"><a href="https://www.grammarcheck.net/about/">About</a></li>
<li class="page_item page-item-141"><a href="https://www.grammarcheck.net/blog/">Blog</a></li>
<li class="page_item page-item-199"><a href="https://www.grammarcheck.net/contact/">Contact</a></li>
<li class="page_item page-item-202"><a href="https://www.grammarcheck.net/disclaimer/">Disclaimer</a></li>
<li class="page_item page-item-1022"><a href="https://www.grammarcheck.net/infographics/">Infographics</a></li>
<li class="page_item page-item-3320 current_page_item"><a href="https://www.grammarcheck.net/editor/" aria-current="page">Online Editor</a></li>
<li class="page_item page-item-112"><a href="https://www.grammarcheck.net/privacy-policy/">Privacy Policy</a></li>
</ul>
</div><div class="widget_text widget widget_custom_html fwidgets" id="custom_html-5"><p class="widget_title">Popular Infographics</p><div class="textwidget custom-html-widget"><div style="width:inherit; height:auto;">
<div style="width:50%; height:100%; float:left;"><a href="https://www.grammarcheck.net/boring-words/" target="_blank" class="lazyParent" rel="noopener"><img loading="lazy" width="200" height="400" src="https://www.grammarcheck.net/img/boring-words.png" alt="16 Boring Words" /></a></div>
<div style="width:50%; height:100%; float:right;"><a href="https://www.grammarcheck.net/tricky-plurals/" target="_blank" class="lazyParent" rel="noopener"><img loading="lazy" width="200" height="400" src="https://www.grammarcheck.net/img/fish-vs-fishes.png" alt="Fish or Fishes?" /></a></div>
</div></div></div> </div>
</div>
<div class="footer">
<div class="text_box">
<p>¬© 2024 GrammarCheck</p>
</div>
</div>
</div>
<script src="https://svc.webspellchecker.net/spellcheck31/wscbundle/wscbundle.js"></script>
<script>
        window.WEBSPELLCHECKER_CONFIG = { serviceId: "fBkUBvSBgBCIJ0J", serviceProtocol: "https", servicePort: "443", serviceHost: "svc.webspellchecker.net", servicePath: "api", autoStartup: !0, autoDestroy: !0, autocorrect: !0, proofreadAsYouType: !0, enableLanguagesInBadgeButton: !0, actionItems: ["ignoreAll", "ignore", "proofreadDialog"], enableBadgeButton: !0, removeBranding: !0, enforceAI: !0,lang: "en_US"};
</script>
<link href="https://cdn.jsdelivr.net/npm/froala-editor@4.1.4/css/froala_editor.pkgd.min.css" rel="stylesheet" type="text/css">
<script src="https://cdn.jsdelivr.net/npm/froala-editor@4.1.4/js/froala_editor.pkgd.min.js"></script>
<script src="https://www.grammarcheck.net/js/word_counter.js"></script>
<script>
var chkAlreadyVisible = false;
var glyAlreadyVisible = false;
let isGlyDialogShown = false;
const API_SUBMIT_FOR_NON_GLY = true;
const ALLOWED_FREE_CHAR = 5000;
const NO_OF_TIMES_TO_SHOW = {
    gly: 0
};
FroalaEditor.DefineIcon('lnDropdown', { NAME: 'cog', SVG_KEY: 'cogs' });
var languageList = {
    'auto': 'Auto Detect',
    'en_US': 'American English',
    'en_AU': 'Australian English',
    'en_GB': 'British English',
    'en_CA': 'Canadian English',
    'en_NZ': 'New Zealand English',
    'en_ZA': 'South African English'
};
FroalaEditor.DefineIcon('clear', { NAME: 'remove', SVG_KEY: 'remove' });
FroalaEditor.RegisterCommand('clear', {
  title: 'Clear Editor',
  focus: false,
  undo: true,
  refreshAfterCallback: true,
  callback: function () {
    var editor = this;
    var confirmed = confirm('Remove all text?');
    if (confirmed) {
      editor.html.set('');
      editor.events.focus();
      resetUI();
    }
  }
});
FroalaEditor.DefineIcon('selectAll', { NAME: 'Select All', template: 'text' });
FroalaEditor.DefineIcon('copy', { NAME: 'Copy', template: 'text' });
FroalaEditor.RegisterCommand('copy', {
  title: 'Copy',
  focus: true,
  undo: false,
  refreshAfterCallback: false,
  callback: function () {
    var selectedText = window.getSelection().toString();
    if(selectedText.length > 0) {
      document.execCommand('copy');
    } else {
      alert('Please select some text first.');
    }
  }
});
FroalaEditor.DefineIcon('paste', {NAME: 'Paste', template: 'text'});
FroalaEditor.RegisterCommand('paste', {
  title: 'Paste',
  focus: true,
  undo: false,
  refreshAfterCallback: false,
  callback: function() {
    // Check text length
    const editorInstance = this;
    navigator.clipboard.readText().then(function(text) {
      let totalLength = text.length + editorInstance.charCounter.count();
      if (totalLength > ALLOWED_FREE_CHAR && !glyInstalled) {
        showSignupModal(text);
      } else {
        // Replace line breaks with '<br>'
        let cleanedText = text.replace(/(?:\r\n|\r|\n)/g, '<br>');

        // Insert the cleaned text into the editor
        document.execCommand('insertHTML', false, cleanedText);
        showHideChkText(editorInstance.charCounter.count(), false, true);
        $("#btn-fix-all-errors").hide();
      }
    });
  }
});
FroalaEditor.DefineIcon('fullscreen', { NAME: 'expand', SVG_KEY: 'fullscreen' });
FroalaEditor.RegisterCommand('fullscreen', {
  title: 'Wide Mode',
  focus: false,
  undo: false,
  refreshAfterCallback: false,
  callback: function () {
    var $fullscreenIcon = $('.fr-command[data-cmd="fullscreen"]');

    if ($('.container').width() === 1000) {
      $('.container').css('width', '800px');
      $('.content').css('width', '800px');
      $('.froala-editor').css('width', '');
      $fullscreenIcon.removeClass('fr-active');
      localStorage.removeItem('gcwide');
    } else {
      $('.container').css('width', '1000px');
      $('.content').css('width', '1000px');
      $('.froala-editor').css('width', '1000px');
      $fullscreenIcon.addClass('fr-active');
      localStorage.setItem('gcwide', '1');
    }
  }
});
FroalaEditor.DefineIcon('tts', { NAME: '&#9654;', template: 'text' });
FroalaEditor.RegisterCommand('tts', {
  title: 'Text to Speech',
  focus: false,
  undo: false,
  refreshAfterCallback: false,
  callback: function () {
    const editor = this;
    const $ttsButton = editor.$tb.find('.fr-command[data-cmd="tts"] > :first-child');
    let html = editor.html.get().replace(/<br>/g, "\n").replace(/<\/td>/g, "\n").replace(/<\/p><p>/g, "\n");

    let tempDiv = document.createElement('div');
    tempDiv.innerHTML = html;
    let cleanText = tempDiv.innerText;
    cleanText = cleanText.replace(/<\/?[^>]+(>|$)/g, "");
    cleanText = cleanText.replace(/\s+/g, ' ').trim();

    let paragraphs = cleanText.split("\n");

    if (window.speechSynthesis.speaking) {
      window.speechSynthesis.cancel();
      $ttsButton.html('&#9654;');
    } else if (cleanText.trim() !== "") {
      let paragraphCounter = 0;
      paragraphs.forEach(function(paragraph) {
        let msg = new SpeechSynthesisUtterance(paragraph);
        msg.rate = 1;
        msg.onend = function () {
          paragraphCounter++;
          if (paragraphCounter === paragraphs.length) {
            $ttsButton.html('&#9654;');
          }
        }
        window.speechSynthesis.speak(msg);
      });
      $ttsButton.html('&#x23F9;');
    }
  }
});
FroalaEditor.RegisterCommand('lnDropdown', {
    title: 'Select language',
    type: 'dropdown',
    focus: true,
    undo: false,
    refreshAfterCallback: true,
    options: languageList,
    callback: function(cmd, val) {
        appInstance.setLang(val);
        $('span#lnDropdown-selected').text("Language: " + languageList[val]);
        localStorage.setItem('lnDropdown', val);
        if ($("#chk").is(":visible")) {
            $("#chk").fadeOut();
         }
        let buttonFreeCheck = document.getElementById("btn-free-check");
        buttonFreeCheck.disabled = false;
    },
    refresh: function($btn) {},
    refreshOnShow: function($btn, $dropdown) {}
});
function showLoadingIcon() {
    let loadingIcon = document.getElementById("fetching-data");
    $("#fetching-data").height($(".fr-basic").height());
    loadingIcon.style.display = "flex";
};
function hideLoadingIcon() {
    document.getElementById("fetching-data").style.display = "none";
};
function setCursor(editorInstance) {
    editorInstance.events.focus();

    const editorDocument = editorInstance.$el.get(0).ownerDocument;
    const editorWindow = editorDocument.defaultView || window;
    const range = editorDocument.createRange();
    const selection = editorWindow.getSelection();
    const editorContent = editorInstance.el.childNodes;

    if (editorContent.length > 0) {
        const lastNode = editorContent[editorContent.length - 1];
        range.setStartAfter(lastNode);
        range.collapse(true);
        selection.removeAllRanges();
        selection.addRange(range);
    }
};
function checkForUserData(callback) {
    try {
        let localData = localStorage.getItem('editor-user-data');
        if (localData) {
            window.container.html.set(localData);
            $("#gly").show();
        }
    } catch (e) {
        console.error(e);
    } finally {
        hideLoadingIcon();
        window.localStorage.removeItem('editor-user-data');
        if (typeof callback === "function") {
            callback(window.container);
        }
    }
};
window.container = new FroalaEditor(document.querySelector('.froala-editor'), {
    heightMin: 300,
    heightMax: 1000,
    widthMax: 800,
    attribution: false,
    htmlExecuteScripts: false,
    pastePlain: true,
    charCounterCount: true,
    wordCounter: true,
    wordCounterLabel: "Words ",
    wordCounterBbCode: false,
    wordCounterTimeout: 0,
    quickInsertTags: [],
    placeholderText: "Enter your text here",
    // Set custom buttons.
    toolbarButtons: {
        moreRich: {
            buttons: ['fullscreen', '|', 'undo', 'redo', '|', 'clear', '|', 'selectAll', '|', 'copy', '|', 'paste', '|', 'tts', '|','paragraphFormat', 'fontSize', 'bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', 'formatOL', 'formatUL', 'print'],
            align: 'left',
            buttonsVisible: 8
        },
        moreMisc: {
            buttons: ['lnDropdown'],
            align: 'right',
            buttonsVisible: 1
        }
    },
    toolbarButtonsXS: {

        moreRich: {
            buttons: ['paste', 'undo', 'redo', '|', 'clear', '|', 'selectAll', '|', 'copy', 'tts'],
            align: 'left',
            buttonsVisible: 1
        },
        moreMisc: {
            buttons: ['lnDropdown'],
            align: 'right',
            buttonsVisible: 1
        }
    },
events: {
    'initialized': function() {
        window.appInstance = WEBSPELLCHECKER.init({
            container: this.$iframe ? this.$iframe[0] : this.el,
            onLoad: function(instance) {
                document.querySelector("div.wsc-badge").classList.add("hide");
                this.setMarkupPaused(true);
                this.setDisabled(true);

                var lnDropdownSetting = localStorage.getItem('lnDropdown');
                if (lnDropdownSetting && this.getLangList().ltr[lnDropdownSetting]) {
                    this.setLang(lnDropdownSetting);
                    $('span#lnDropdown-selected').text("Language: " + languageList[lnDropdownSetting]);
                } else {
                    localStorage.removeItem('lnDropdown');
                }
            }
        });

        $('button#lnDropdown-1').find('svg:first').remove();
        $('button#lnDropdown-1').prepend("<span id='lnDropdown-selected'>English: Auto Detect</span>");

        setTimeout(() => {
            checkForUserData(setCursor);
        }, 500);
    },

  'keydown': function(e) {
    if (e.keyCode === 8 || e.keyCode === 46) {
      showHideChkText(this.charCounter.count(), true, true);
      $("#btn-fix-all-errors").hide();
      $("#chk").hide();
    }
  },

  'keypress': function() {
    window.lastPauseTime = new Date().getTime();
    appInstance.setMarkupPaused(true);
    showHideChkText(this.charCounter.count(), false, true);
    $("#btn-fix-all-errors").hide();
    $("#chk").hide();
  },

  'paste.before': function(e) {
    // Check text length
    let paste = event.clipboardData.getData('text');
    let totalLength = paste.length + this.charCounter.count();
    if (totalLength > ALLOWED_FREE_CHAR && !glyInstalled) {
      showSignupModal(paste);
      return false;
    }
  },

  'paste.after': function() {
    window.lastPauseTime = new Date().getTime();
    appInstance.setMarkupPaused(true);
    showHideChkText(this.charCounter.count(), false, true);
    $("#btn-fix-all-errors").hide();
    $("#chk").hide();
  },
  
  'contentChanged': function () {
      $(".fr-errors").hide();
      setTimeout(() => {
          const problemsCount = window.appInstance.getProblemsCount();
            if (problemsCount === 0) {
            $("#btn-fix-all-errors").hide();
            }
      }, 100);
    }
  
},
    key: '6LF5g1D3G3A2B5D5C3C2xbtfedkyoeklH-8I1C-22ve1iG5G4E3H3A1C8A5D4D4B4=='
});
</script>
<script>
  // Height adjust handle
  document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
      const editorContainer = document.querySelector('.fr-element');
      const resizeHandle = document.querySelector('.resize-handle');

      let isDragging = false;
      let startY;
      let startHeight;

      resizeHandle.addEventListener('mousedown', (e) => {
        isDragging = true;
        startY = e.clientY;
        startHeight = parseInt(document.defaultView.getComputedStyle(editorContainer).height, 10);
      });

      document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        const mouseY = e.clientY;
        const newHeight = startHeight + mouseY - startY;
        if (newHeight >= 300 && newHeight <= 1000) {
          editorContainer.style.height = newHeight + 'px';
        }
      });

      document.addEventListener('mouseup', () => {
        isDragging = false;
        if (editorContainer) {
          localStorage.setItem('editorHeight', editorContainer.style.height);
        }
      });
     
    }, 500);
  });
</script>
<script>
// Custom scripts
var freeCheckClicked = false;
var fixAllClicked = false;
var deepCheckClicked = false;
window.lastPauseTime = 0;
window.glyAlreadyInstalled = false;
var userConfirmedGly = false;

function resetUI() {
    $(".fr-dialog").hide();
    $("#chk").hide();
    $("#gly").hide();
    $("#btn-fix-all-errors").hide();
    $(".fr-errors").hide();
}

function updateErrorDisplay(errorCountDisplay, message) {
  errorCountDisplay.textContent = message;
  if (!errorCountDisplay.parentElement) {
    const secondToolbar = document.querySelector(".fr-second-toolbar");
    errorCountDisplay.classList.add("fr-counter", "fr-errors");
    errorCountDisplay.style.bottom = "1px";
    errorCountDisplay.style.marginLeft = "2px";
    errorCountDisplay.style.float = "left";
    secondToolbar.insertBefore(errorCountDisplay, secondToolbar.firstChild);
  }
}

function updateErrorCount() {
  if(deepCheckClicked) return;
  
  let buttonFixAllErrors = document.getElementById("btn-fix-all-errors");
  let buttonFreeCheck = document.getElementById("btn-free-check");

  try {
    window.appInstance.reloadMarkup();
    const problemsCount = appInstance.getProblemsCount();
    let errorCountDisplay = document.querySelector(".fr-errors") || document.createElement("span");

    // Condition to hide error count
    if (glyInstalled || userConfirmedGly === 'true') {
      errorCountDisplay.style.display = "none";
    } else {
      if (problemsCount === 0) {
        window.appInstance.setMarkupPaused(true);
        buttonFixAllErrors.style.display = "none";
        buttonFreeCheck.disabled = true;
        if (isMobile) {
            if(fixAllClicked) {
            updateErrorDisplay(errorCountDisplay, "Errors fixed");
            } else {
            updateErrorDisplay(errorCountDisplay, "No errors found");
            }
        } else {
            updateErrorDisplay(errorCountDisplay, "");
            if(fixAllClicked) {
            $("#chk").html("Errors fixed. Check for difficult-to-spot mistakes<img height='33' src='https://www.grammarcheck.net/img/ar.png' style='float:right;height:22px;margin:5px auto auto 10px;' alt='arrow pointing right' />").fadeIn();
            } else {
            $("#chk").html("No errors found. Check for difficult-to-spot mistakes<img height='33' src='https://www.grammarcheck.net/img/ar.png' style='float:right;height:22px;margin:5px auto auto 10px;' alt='arrow pointing right' />").fadeIn();
            }
        }
      } else {
        if(!fixAllClicked) {
          buttonFixAllErrors.style.display = "flex";
        }
        updateErrorDisplay(errorCountDisplay, "Errors found : " + problemsCount);
      }
      // Show .fr-errors element, even if no errors were found
      if (errorCountDisplay) {
        $(errorCountDisplay).fadeIn();
      }
    }
  } catch (e) {
    console.log(e);
  }
}

function enableChecker() {
  freeCheckClicked = true;
  fixAllClicked = false;
  deepCheckClicked = false;
  window.appInstance.setDisabled(false);
  window.appInstance.setMarkupPaused(false);
  showLoadingIcon();
  let buttonFreeCheck = document.getElementById("btn-free-check");
  buttonFreeCheck.disabled = true;

  // Get character count from Froala Editor
  let charCount = window.container.charCounter.count();

  // Define base and maximum timeouts
  let baseTimeout = 3200;
  let maxTimeout = 4000;

  // Calculate the dynamic timeout based on character count
  let proportion = (Math.min(charCount, 5000) - 1000) / 4000;
  let dynamicTimeout = baseTimeout + (maxTimeout - baseTimeout) * proportion;

  window.setTimeout(function() {
    hideLoadingIcon();
    buttonFreeCheck.disabled = false;
    updateErrorCount();
  }, dynamicTimeout);

    resetUI();
}

function fixAllErrors() {
  freeCheckClicked = false;
  fixAllClicked = true;
  deepCheckClicked = false;
  $(".fr-errors").hide();
  $("#btn-fix-all-errors").hide();

  const elements = document.querySelectorAll('div.wsc-element span[data-wsc-id]');
  elements.forEach((el, idx) => {
    setTimeout(() => {
      const a = window.appInstance._sandbox.getProblemActions(el);

      if (a.suggestions[0]) {
        a.suggestions[0].call();
      }

      // After the last element is processed, check if all errors are fixed
      if (idx === elements.length - 1) {
        checkForCompletion();
      }
    }, idx * 100);
  });

  function checkForCompletion() {
    // Check if there are any remaining problems
    const problemsCount = window.appInstance.getProblemsCount();
    if (problemsCount === 0) {
      // If no more problems, update the UI accordingly
      updateErrorCount();
    } else {
      // If there are still problems, wait for a bit and then check again
      setTimeout(checkForCompletion, 500);
    }
  }
}

var glyInstalled = false;

// If no key press call API
setInterval(function() {
    if (!glyInstalled && !userConfirmedGly && freeCheckClicked && lastPauseTime !== 0 && new Date().getTime() - lastPauseTime >= 3000) {
        window.appInstance.setMarkupPaused(false);
    }
}, 3000);

// Checking for Gly plugin
let userChoice = localStorage.getItem('userConfirmedGly');

// If the user choice was saved previously, use it
if (userChoice !== null) {
    userConfirmedGly = userChoice;
}

// Gly Enable
function glyEnable() {
    hideLoadingIcon();
    $("#btn-free-check").prop("disabled", true);
    $("#btn-free-check").addClass("glyon");
    $("#chk").hide();
    $(".fr-errors").hide();
    $("#btn-fix-all-errors").hide();
    window.glyAlreadyInstalled = true;
    window.glyInstalled = true;

    // Add "Gly enabled" span
    setTimeout(function() {
        const glyEnabledDisplay = document.querySelector('.gly-enabled');
        if (!glyEnabledDisplay) {
            const secondToolbar = document.querySelector('.fr-second-toolbar');
            const glyEnabledDisplay = document.createElement('span');
            glyEnabledDisplay.classList.add('fr-counter', 'gly-enabled');
            glyEnabledDisplay.style.bottom = '1px';
            glyEnabledDisplay.style.marginLeft = '2px';
            glyEnabledDisplay.style.float = 'left';
            glyEnabledDisplay.textContent = 'Grammarly enabled';

            glyEnabledDisplay.addEventListener('click', function() {
                $(".gly-enabled").hide();

                const disableDialog = document.createElement('div');
                disableDialog.classList.add('fr-counter', 'fr-dialog');
                disableDialog.style.bottom = '1px';
                disableDialog.style.float = 'left';
                disableDialog.style.marginLeft = '2px';

                const disableQuestion = document.createElement('span');
                disableQuestion.textContent = "Do you have Grammarly installed?";
                disableDialog.appendChild(disableQuestion);

                const yesButton = document.createElement('button');
                yesButton.textContent = 'Yes';
                yesButton.classList.add('dialog-btn');
                yesButton.onclick = function() {
                    disableDialog.remove();
                    $(".gly-enabled").show();
                };
                disableDialog.appendChild(yesButton);

                const noButton = document.createElement('button');
                noButton.textContent = 'No';
                noButton.classList.add('dialog-btn');
                noButton.onclick = function() {
                    // Remove the initial disable dialog
                    disableDialog.remove();

                    // Remove the localStorage item
                    localStorage.removeItem('userConfirmedGly');

                    // Call the glyDisable function
                    glyDisable();
                };
                disableDialog.appendChild(noButton);

                secondToolbar.insertBefore(disableDialog, secondToolbar.firstChild);
            });

            secondToolbar.insertBefore(glyEnabledDisplay, secondToolbar.firstChild);
        }
    }, 100);
}

// Gly Disable
function glyDisable() {
    hideLoadingIcon();
    $("#btn-free-check").prop("disabled", false);
    $("#btn-free-check").removeClass("glyon");
    $(".fr-errors").show();
    window.glyAlreadyInstalled = false;
    window.glyInstalled = false;

    // Remove "Gly enabled" span
    const glyEnabledDisplay = document.querySelector(".gly-enabled");
    if (glyEnabledDisplay) {
        glyEnabledDisplay.parentNode.removeChild(glyEnabledDisplay);
    }
}

// Gly check and set enabled state
if (userConfirmedGly === 'true') {
  glyEnable();
} else {
  setTimeout(function() {
    if (($('grammarly-ghost').length > 0) || ($('grammarly-desktop-integration').length > 0) || ($('.gr-top-z-index').length > 0) || ($('grammarly-extension').length > 0)) {
      glyEnable();
      userConfirmedGly = 'true'; // Set userConfirmedGly to true if Gly is auto-detected
    }
  }, 500);
}

// Gly Dialog
function showGlyDialog() {
    if (isGlyDialogShown) {
        return;
    }

    const userConfirmedGly = localStorage.getItem('userConfirmedGly');

    if (!glyInstalled && !userConfirmedGly) {
        const showFirstQuestion = function() {
            const glyDialog = document.createElement('div');
            glyDialog.textContent = 'Do you have Grammarly installed?';
            glyDialog.classList.add('fr-counter', 'fr-dialog');
            glyDialog.style.bottom = '1px';
            glyDialog.style.float = 'left';
            // glyDialog.style.marginLeft = '2px';

            // Add Yes and No buttons to the dialog
            const yesButton = document.createElement('button');
            yesButton.textContent = 'Yes';
            yesButton.classList.add('dialog-btn');
            yesButton.onclick = function() {
                localStorage.setItem('userConfirmedGly', 'true');
                glyEnable();
                location.reload();
            };
            glyDialog.appendChild(yesButton);

            const noButton = document.createElement('button');
            noButton.textContent = 'No';
            noButton.classList.add('dialog-btn');
            noButton.onclick = function() {
                glyDialog.textContent = 'Installing Grammarly enables additional corrections';
                const getItNowButton = document.createElement('button');
                getItNowButton.textContent = 'Get it now';
                getItNowButton.classList.add('dialog-btn', 'dialog-get');
                getItNowButton.onclick = function() {
                    glyDialog.remove();
                    window.open('https://www.grammarcheck.net/go/extension', '_blank');
                    showFirstQuestion(); // Restart the dialog
                };
                glyDialog.appendChild(getItNowButton);

                const noThanksButton = document.createElement('button');
                noThanksButton.textContent = 'No thanks';
                noThanksButton.classList.add('dialog-btn');
                noThanksButton.onclick = function() {
                    glyDialog.remove();
                };
                glyDialog.appendChild(noThanksButton);
                
            };
            glyDialog.appendChild(noButton);

            const secondToolbar = document.querySelector('.fr-second-toolbar');
            secondToolbar.insertBefore(glyDialog, secondToolbar.firstChild);
        };

        showFirstQuestion();
        isGlyDialogShown = true;
    }
}

// Check for mobile
$(document).ready(function() {
    window.isMobile = window.matchMedia("only screen and (max-width: 820px)").matches;
});

// Show hide chk etc
function showHideChkText(count = 0, backspace = false) {
  if (backspace || (!glyAlreadyInstalled)) {
    $(".fr-errors").fadeOut();
    $("#chk").fadeOut();
    $("#gly").fadeOut();
    chkAlreadyVisible = false;
    glyAlreadyVisible = false;
    //Enable the button
    if (!glyInstalled) {
      let buttonFreeCheck = document.getElementById("btn-free-check");
      buttonFreeCheck.disabled = false;
    }
  } else if (count === 0 && $("#fr-element").length > 0 && $("#fr-element").val().trim() !== "") {
    return true;
  } else {
    $("#chk").fadeOut();
    if (count > 20 && glyAlreadyInstalled && !glyAlreadyVisible && NO_OF_TIMES_TO_SHOW.gly > 0) {
      glyAlreadyVisible = true;
        if (glyAlreadyVisible) {
          $("#gly").fadeIn();
        }
      NO_OF_TIMES_TO_SHOW.gly--;
    } else if (glyAlreadyVisible && count < 20) {
      glyAlreadyVisible = false;
      $("#gly").fadeOut();
    }
  }
}

function showSignupModal(clipboardData) {
    // Get the modal
    const signUpModal = document.getElementById("signUpModal");
    signUpModal.style.display = "flex";

    // Attach click event
    // Go to signup page
    document.getElementById("go-to-signup").addEventListener('click', function(e) {
        e.preventDefault();

        const extensionUrl = `${window.location.origin}/go/extension`;
        const currentText = window.container.html.get();

        window.container.html.insert(clipboardData);
        window.localStorage.setItem('editor-user-data', window.container.html.get());
        
        window.open(extensionUrl, '_blank');

        setTimeout(function() {
            // Update the Modal content
            document.getElementById("choice-box").style.display = "none";
            
            // Get refresh page element and animate it
            let refreshPageElement = document.getElementById("refresh-page");
            refreshPageElement.style.display = "block";
            refreshPageElement.style.top = "100px";
            refreshPageElement.style.opacity = "1";
            window.container.html.set(currentText);
        }, 1000);
    });

    // Add event listener to continue with short button
    document.getElementById("continue-with-short").addEventListener("click", function(e) {
        e.preventDefault();
        signUpModal.style.display = "none";
    });
}

</script>
<script>
jQuery(function() {
    function getForm() {
        return jQuery('#submitTextForm');
    }

    function getText() {
        return $(window.container.html.get()).text();
    }

    function buildReportUrl(url, alerts) {
        alerts = group(alerts);
        return url + (~url.indexOf('?') ? '&' : '?') + 'errors=' + processGroups(alerts);
    }

    function getUrlParams(urlPart) {
        var result = {};
        urlPart = urlPart || window.location.search
        var params = (urlPart.split('?')[1] || '').split('&');
        for (var param in params) {
            if (params.hasOwnProperty(param)) {
                var paramParts = params[param].split('=');
                result[paramParts[0]] = decodeURIComponent(paramParts[1] || "");
            }
        }
        return result;
    }

    function group(alerts) {
        var map = {},
            arr = [];
        for (var i = 0; i < alerts.length; i++) {
            var g = alerts[i].group;
            if (!map[g]) map[g] = {
                group: g,
                total: 0,
                categories: []
            };
            map[g].total += alerts[i].count;
            map[g].categories.push({
                category: alerts[i].category,
                count: alerts[i].count
            });
        }
        for (var gr in map) {
            arr.push(map[gr]);
        }
        return arr;
    }

    function processGroups(groups) {
        function processCategories(cats) {
            var a = [];
            for (var i = 0; i < cats.length; i++) {
                a.push(cats[i].category + ':' + cats[i].count);
            }
            return a.join(',');
        }

        var a = [];
        for (var i = 0; i < groups.length; i++) {
            a.push(groups[i].group + '|' + processCategories(groups[i].categories));
        }
        return a.join('(|)');
    }

    function getUrlParams(urlPart) {
        var result = {};
        urlPart = urlPart || window.location.search
        var params = (urlPart.split('?')[1] || '').split('&');
        for (var param in params) {
            if (params.hasOwnProperty(param)) {
                var paramParts = params[param].split('=');
                result[paramParts[0]] = decodeURIComponent(paramParts[1] || "");
            }
        }
        return result;
    }

    function getCheckingEndpoint() {
        return '/checking?g=' + (glyAlreadyInstalled ? '1' : '0') + '&m=' + (window.isMobile ? '1' : 0);
    }

    var form = getForm();

    form.on('submit', function() {
        deepCheckClicked = true;
        $(".fr-errors").fadeOut();
        $("#chk").fadeOut();
        $("#gly").fadeOut();
        showGlyDialog();
        
        if (API_SUBMIT_FOR_NON_GLY) {
            showDeepCheckResult();
        } else if (!userConfirmedGly && !glyInstalled && !glyAlreadyInstalled) {
            gotoStaticViaChecking();
        } else {
            showDeepCheckResult();
        }
        
        return false;
    });

    function gotoStaticViaChecking() {
        let checkingUrl = window.location.origin + getCheckingEndpoint();
        target = window.open(checkingUrl, '_blank');
        let signupUrl = window.location.origin + "/go/upgrade";
        target.location = signupUrl;
    }

    function showDeepCheckResult() {
    const trackingLink = "https://irbis.grammarly.com/aff_c?aff_id=1122&offer_id=41&source=gc&aff_sub=gcwp&utm_source=program";
    var params = getUrlParams(trackingLink);
    params.text = getText() + 'chk.(url)';
    if (params.text.length < 2) return !!alert('Please enter more text to start the check');
    var target = null;
    var protocol = location.protocol;
    var slashes = protocol.concat("//");
    var host = slashes.concat(window.location.hostname);
    target = window.open(slashes.concat(window.location.hostname) + getCheckingEndpoint(), '');
    function glyapi() {
        jQuery.ajax({
            url: 'https://irbis.grammarly.com/api/funnels/embedded/check',
            data: params,
            type: 'POST',
            context: {
                target: target
            },
            success: function(response) {
                if (this.target != null) target.location = response.reportUrl;
                else window.location = response.reportUrl;
            },

            error: function(e) {
                console.error(e)
            }
        });
    }
    if (params.text.length > 1000) {
        glyapi();
    } else {
        if (glyInstalled || userConfirmedGly) {
            setTimeout(glyapi, 2000);
        } else {
            setTimeout(glyapi, 1000);
        }
    }
}
    jQuery(document).on('Enable', function() {
        showDeepCheckResult();
    });
})
</script>
<script>
document.addEventListener('DOMContentLoaded', function () {
let a_current = 0;
let a_items = [sl("#itm0"), sl("#itm1"), sl("#itm2")];

function sl(sel) { return document.querySelector(sel) }

for(let i=0; i<a_items.length; i++) {
sl("#itm" + i + " .a_ttl").addEventListener("click", function() {
a_current = this.getAttribute("data-id");
sl("#itm" + a_current + " .a_ttl").classList.toggle("closed");
sl("#itm" + a_current + " .a_txt").classList.toggle("closed");
});
}
}, false);
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    var userConfirmedGly = localStorage.getItem('userConfirmedGly') === 'true';
    var glyInstalled = localStorage.getItem('glyInstalled') === 'true';

    // Load fullscreen mode
    if (localStorage.getItem('gcwide') === '1') {
      $('.container').css('width', '1000px');
      $('.content').css('width', '1000px');
      $('.froala-editor').css('width', '1000px');
      setTimeout(function() {
        $('.fr-command[data-cmd="fullscreen"]').addClass('fr-active');
      }, 100);
    }

    // Load saved content and editor height
    var editor = new FroalaEditor('#editor');
    setTimeout(function() {
      // Load saved content
      var savedContent = localStorage.getItem('editorContent');
      if (savedContent) {
        var data = JSON.parse(savedContent);
        editor.html.set(data.content);
      }

      // Load saved editor height
      var savedEditorHeight = localStorage.getItem('editorHeight');
      if (savedEditorHeight) {
        document.querySelector('.fr-element').style.height = savedEditorHeight;
      }

      // Save editor's content
      editor.events.on('blur', function () {
        var content = editor.html.get(true);
        var data = { content: content, timestamp: Date.now() };
        localStorage.setItem('editorContent', JSON.stringify(data));
      });

    }, 100);

    // Show Dialog on page load
    // setTimeout(function() {
    // showGlyDialog();
    // }, 500);

  });
</script>
<script>(function(d,g){d[g]||(d[g]=function(g){return this.querySelectorAll("."+g)},Element.prototype[g]=d[g])})(document,"getElementsByClassName");(function(){var classes = document.getElementsByClassName('menu_control');for (i = 0; i < classes.length; i++) {classes[i].onclick = function() {var menu = this.nextElementSibling;if (/show_menu/.test(menu.className))menu.className = menu.className.replace('show_menu', '').trim();else menu.className += ' show_menu';if (/menu_control_triggered/.test(this.className))this.className = this.className.replace('menu_control_triggered', '').trim();else this.className += ' menu_control_triggered';};}})();</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N1W75MW6KG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-N1W75MW6KG');
</script>
</body>
</html>
